# Tailscale Split DNS Configuration
# Only listens on Tailscale interface for security

# ============================================
# INTERFACE & SECURITY SETTINGS
# ============================================

# Listen only on Tailscale interface (prevents public access)
listen-address=127.0.0.1
port=53

# Bind to specific interfaces only
bind-interfaces

# Don't read system files
no-resolv
no-hosts
no-poll

# ============================================
# UPSTREAM DNS SERVERS
# ============================================

# Forward non-matching queries to Cloudflare DNS
server=1.1.1.1
server=1.0.0.1

# ============================================
# CUSTOM DNS RECORDS (Tailscale IP)
# ============================================

# All *.erodev.cloud domains resolve to Tailscale IP
address=/n8n.erodev.cloud/100.116.229.118
address=/dokploy.erodev.cloud/100.116.229.118
address=/cops.erodev.cloud/100.116.229.118
address=/erodev.cloud/100.116.229.118

# Add more services as needed:
# address=/service-name.erodev.cloud/100.116.229.118

# ============================================
# PERFORMANCE & CACHING
# ============================================

# Cache size (number of entries)
cache-size=1000

# Enable DNSSEC
dnssec

# ============================================
# LOGGING (Disable in production)
# ============================================

# Uncomment for debugging:
# log-queries
# log-facility=/var/log/dnsmasq.log

# ============================================
# ADDITIONAL SECURITY
# ============================================

# Don't forward plain names (without dots)
domain-needed

# Don't forward reverse lookups for private IP ranges
bogus-priv

# Enable strict order of servers
strict-order
